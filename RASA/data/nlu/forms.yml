## NLU forms (Slot Filling).
#  See https://learning.rasa.com/archive/rasa-forms-2/rasa-forms/ (RASA 2.x),
#  https://learning.rasa.com/rasa-forms-3/ and https://rasa.com/docs/rasa/forms/

version: "3.1"

slots:
  first_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        entity: NAME
  last_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        entity: NAME
  item:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: ITEM
      conditions:
        - active_loop: item_config_form
  item_status:
    type: categorical
    values:
      - on
      - off
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: STATUS
  color:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: COLOR
        conditions:
          - active_loop: light_form
  brightness:
    type: categorical
    values:
      - low
      - medium
      - high
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: BRIGHTNESS
        conditions:
          - active_loop: light_form
  location:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: LOC
        conditions:
          - active_loop: light_form
  value:
    type: int
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: VALUE
        conditions:
        - active_loop: light_form
  scene_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        entity: NAME
        intent: add_scene
        conditions:
          - active_loop: scene_form

# Activating via stories or rules
forms:
  name_form:
    required_slots:
      - first_name
      - last_name
  item_config_form:
    required_slots:
      - item
      - location
  light_form:
    required_slots:
      - item_status
      - color
      - value
  power_socket_form:
    required_slots:
      - item_status
  fallback_item_form:
    required_slots:
      - item_status
      - value
  scene_form:
    required_slots:
      - scene_name

